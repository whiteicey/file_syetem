\doxysection{include/sys/fs/fsops.h 文件参考}
\label{fsops_8h}\index{include/sys/fs/fsops.h@{include/sys/fs/fsops.h}}


文件系统的核心操作。  


{\ttfamily \#include \char`\"{}types/dir.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../user.\+h\char`\"{}}\newline
fsops.\+h 的引用(Include)关系图\+:
% FIG 0
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__action_ga1aaa48b192a5dd3b6d7ee91fc98cd17d}{S\+\_\+\+IFREG}}~0x0100000
\begin{DoxyCompactList}\small\item\em 普通文件标识 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__action_ga11fb0652b963a735f3377eb1c9239f2d}{S\+\_\+\+IFDIR}}~0x0040000
\begin{DoxyCompactList}\small\item\em 目录文件标识 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__action_ga3212f3e7a4bdeb6d56ceac3c602fbf2a}{RECURSIVE}}~0x800
\begin{DoxyCompactList}\small\item\em 递归行为标识 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__action_gab9b6a053e42fa67776468f7902fda384}{GET\+\_\+\+BLKN}}(ino,  n)~(\mbox{\hyperlink{group__fs_ga51294bf9bf3763fa1d2eaf8ee7358cde}{BLK}}\mbox{[}\mbox{\hyperlink{structinode}{inode}}\mbox{[}ino\mbox{]}.blk1\mbox{[}n\mbox{]}\mbox{]})
\begin{DoxyCompactList}\small\item\em 获取文件的第n个块 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__action_ga124c77d95528610b97a09ee0c1a22182}{GET\+\_\+\+PAGE}}(ino,  page)~(page $>$= 10 ? \mbox{\hyperlink{group__fs_ga51294bf9bf3763fa1d2eaf8ee7358cde}{BLK}}\mbox{[}\mbox{\hyperlink{structinode}{inode}}\mbox{[}ino\mbox{]}.blk2\mbox{]}.index\mbox{[}page-\/10\mbox{]} \+: \mbox{\hyperlink{structinode}{inode}}\mbox{[}ino\mbox{]}.blk1\mbox{[}page\mbox{]})
\begin{DoxyCompactList}\small\item\em 获取文件的第n个块 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__action_gab4c0bc284123408f3a8886f675f20189}{GET\+\_\+\+CHAR}}(ino,  page,  offset)~(\mbox{\hyperlink{group__fs_ga51294bf9bf3763fa1d2eaf8ee7358cde}{BLK}}\mbox{[}\mbox{\hyperlink{group__action_ga124c77d95528610b97a09ee0c1a22182}{GET\+\_\+\+PAGE}}(ino,page)\mbox{]}.str\mbox{[}offset\mbox{]})
\begin{DoxyCompactList}\small\item\em 获取字符(？) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{group__action_ga2df77b974df1c417db14d98b954fda67}{add\+\_\+blk\+\_\+for\+\_\+file}} (int ino)
\begin{DoxyCompactList}\small\item\em 为文件申请新的数据块。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_gad41f5224ad12cefbac463c619a923e9d}{find\+\_\+name\+\_\+in\+\_\+dir}} (int ino, const char $\ast$name, int mode)
\begin{DoxyCompactList}\small\item\em 在指定目录下查找具有指定名称的文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_gac72355a82d45ea4621cccaf53e652ba9}{creat\+\_\+stat}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int ino, int mode)
\begin{DoxyCompactList}\small\item\em 创建文件的stat。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga3a688c5497765cdf4f5bc44e721c8dff}{creat\+\_\+dirent}} (int fino, int ino, const char $\ast$name)
\begin{DoxyCompactList}\small\item\em 为文件创建目录入口。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga9451e0f3cc55dc7da04b79e88e45e0e7}{creat\+\_\+dir}} (int ino, int f\+\_\+ino, const char $\ast$dir\+\_\+name)
\begin{DoxyCompactList}\small\item\em 为文件分配struct dir结构。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga91cb6626f30684259e0296ede7113552}{creat\+\_\+ino}} ()
\begin{DoxyCompactList}\small\item\em 分配inode。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga201537deda30a51cb96dc48937c81b96}{creat}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, const char $\ast$args, int mode)
\begin{DoxyCompactList}\small\item\em 创建文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_gad1fbab6bd7c1201c8a46066187524467}{mkdir}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, const char $\ast$dir\+\_\+name, int mode)
\begin{DoxyCompactList}\small\item\em 创建目录。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_gad5e668677b4acfc76c5f0d23df13b0ca}{ls}} (int ino, char $\ast$args)
\begin{DoxyCompactList}\small\item\em 查看目录信息。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_gaee21f23fd7e6debe3c36a5e2011c2744}{pwd}} (int cwd, char $\ast$buf, int ino)
\begin{DoxyCompactList}\small\item\em 取得指定inode的目录名。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_gad644cc5abdd989cc4954c8fea05ddf9e}{cd}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int $\ast$cwd, const char $\ast$dir\+\_\+name)
\begin{DoxyCompactList}\small\item\em 修改指定用户的工作目录。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga33db0cb019e13ef6feaa3152c5c4320f}{rm\+\_\+dir\+\_\+item}} (\mbox{\hyperlink{group__fs__struct_gafbbd3b1f6ddcd58269675a5727e1c80f}{dir\+\_\+t}} $\ast$d, int n)
\begin{DoxyCompactList}\small\item\em 删除指定目录下的第n项。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_gab19526a6d1d83ee5c8027f7e2cebff08}{rm}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, const char $\ast$args, int work\+Ino, int mode)
\begin{DoxyCompactList}\small\item\em 删除指定文件。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_gaad581cfec7c1e716d12250c62b990c7e}{rmdir}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, char $\ast$dir\+\_\+name, int mode)
\begin{DoxyCompactList}\small\item\em 删除目录。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_ga0213b17b7757493ebc884eb4b43d4781}{creat\+\_\+file}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, const char $\ast$args)
\begin{DoxyCompactList}\small\item\em 创建文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_gabf958ac083a62ac07ad2a1ac9c08249e}{open\+\_\+file}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, const char $\ast$args)
\begin{DoxyCompactList}\small\item\em 打开文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga4cb8335cb0c492df9223950070a8131b}{read\+\_\+file}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, int argc, const char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em 读取文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_gaa3294bebf3407cea459ff8260696eefa}{write\+\_\+file}} (const \mbox{\hyperlink{group__user_ga450623fc37d64234cf3afb2f91cd6bf0}{user\+\_\+t}} $\ast$\mbox{\hyperlink{structuser}{user}}, int cwd, int argc, const char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em 写入文件。 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__action_ga0cf0da30de85a6e1ceda71951688dd79}{link\+\_\+file}} (int cwd, int argc, const char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em 创建硬链接。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__action_ga8b1b50f653507747543a21994e42a331}{find\+\_\+file}} (int cwd, const char $\ast$args, int ino)
\begin{DoxyCompactList}\small\item\em 查找文件。 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
文件系统的核心操作。 

\begin{DoxyVersion}{版本}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{日期}
2021-\/11-\/14 
\end{DoxyDate}
