\doxysection{block联合体 参考}
\label{unionblock}\index{block@{block}}


定义文件系统数据块。  




{\ttfamily \#include $<$block.\+h$>$}



block 的协作图\+:
% FIG 0
\doxysubsection*{成员变量}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{unionblock_abe26c4bc56b80b1c48c4946210d26f31}} 
char \mbox{\hyperlink{unionblock_abe26c4bc56b80b1c48c4946210d26f31}{str}} \mbox{[}\mbox{\hyperlink{group__config_gad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\+\_\+\+SIZE}}\mbox{]}
\begin{DoxyCompactList}\small\item\em 数据块 \end{DoxyCompactList}\item 
\mbox{\label{unionblock_ade74ee923acbdf0634becc0f7cee6687}} 
\mbox{\hyperlink{group__fs__struct_gafbbd3b1f6ddcd58269675a5727e1c80f}{dir\+\_\+t}} \mbox{\hyperlink{unionblock_ade74ee923acbdf0634becc0f7cee6687}{dentry}}
\begin{DoxyCompactList}\small\item\em 目录块 \end{DoxyCompactList}\item 
\mbox{\label{unionblock_a31735b2e54c518206f6856eed44de23a}} 
int \mbox{\hyperlink{unionblock_a31735b2e54c518206f6856eed44de23a}{index}} \mbox{[}\mbox{\hyperlink{group__config_gad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\+\_\+\+SIZE}}/sizeof(int)\mbox{]}
\begin{DoxyCompactList}\small\item\em 索引块 \end{DoxyCompactList}\item 
\mbox{\label{unionblock_a0b1b6d79ccf4c57efcfa26393bcd5f5c}} 
\mbox{\hyperlink{group__fs__struct_ga75da1ce0d30c8293aca4876a223db15a}{dirents\+\_\+t}} \mbox{\hyperlink{unionblock_a0b1b6d79ccf4c57efcfa26393bcd5f5c}{dentrys}}
\begin{DoxyCompactList}\small\item\em 扩展目录结构 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
定义文件系统数据块。 

NOTE：我们真的$\ast$$\ast$非常不建议$\ast$$\ast$这样使用union！初始化一个域后访问其他域是\+UB。 建议额外用一个字段记录union里面存的到底是什么，或者干脆改用类似void$\ast$的东西。

NOTE2：我在这里做了少许修改。你内嵌定义了一个union，但没有定义变量。认真的？ NOTE3：鉴于实现比较怪（真正的dentry肯定不是这么存的），不进行block\+\_\+t是否能存下dir\+\_\+t和dirents\+\_\+t的校验。 

该联合体的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
include/sys/fs/types/\mbox{\hyperlink{block_8h}{block.\+h}}\end{DoxyCompactItemize}
